# grep 
文本过滤工具  
grep  egrep  fgrep

```
grep [OPTIONS] PATTERN [FILE...]
```
-a  将二进制文档以文本方式处理  
-c  计算找到的符合行的次数  
-i  忽略大小写  
-n  顺便输出行号   
-v  反向选择，即显示不包含匹配文本的所有行  
-h 查询多文件时不显示文件名。  
-l 查询多文件时只输出包含匹配字符的文件名。  
-s 不显示不存在或无匹配文本的错误信息。  
grep命令加- E参数，这一扩展允许使用扩展模式匹配。  


 通过管道过滤ls-l输出的内容，只显示以a开头的行。 
```
ls -l | grep '^a'
```

 显示所有以d开头的文件中包含test的行。

```
grep 'test' d*
```

  显示在aa，bb，cc文件中匹配test的行。

```
grep 'test' aa bb cc
```

 显示所有包含每个字符串至少有5个连续小写字符的字符串的行。 

```
grep '[a-z]/{5/}' aa
```

 如果west被匹配，则es就被存储到内存中，并标记为1，然后搜索任意个字符（.*），这些字符后面紧跟着另外一个es（/1），找到就显示该行。如果用egrep或grep -E，就不用"/"号进行转义，直接写成'w(es)t.*/1'就可以了。 

```
grep 'w/(es/)t.*/1' aa
```


grep正则表达式元字符集（基本集） 

```
^ 锚定行的开始 如：'^grep'匹配所有以grep开头的行。
```


```
$ 锚定行的结束 如：'grep$'匹配所有以grep结尾的行。
```


```
. 匹配一个非换行符的字符 如：'gr.p'匹配gr后接一个任意字符，然后是p。
```
 

```
* 匹配零个或多个先前字符 如：'*grep'匹配所有一个或多个空格后紧跟grep的行。
```


```
.*一起用代表任意字符。 
[] 匹配一个指定范围内的字符，如'[Gg]rep'匹配Grep和grep。
```


```
[^] 匹配一个不在指定范围内的字符，如：'[^A-FH-Z]rep'匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。
```


```
/(../) 标记匹配字符，如'/(love/)'，love被标记为1。
```


```
/< 锚定单词的开始，
```


```
/> 锚定单词的结束，如'grep/>'匹配包含以grep结尾的单词的行。
```


```
x/{m/} 重复字符x，m次，如：'o/{5/}'匹配包含5个o的行。 x/{m,/}
```
 
```
重复字符x,至少m次，如：'o/{5,/}'匹配至少有5个o的行。
```
 

```
x/{m,n/} 重复字符x，至少m次，不多于n次，如：'o/{5,10/}'匹配5--10个o的行。
```
 

```
/w 匹配文字和数字字符，也就是[A-Za-z0-9_]，如：'G/w*p'匹配以G后跟零个或多个文字或数字字符，然后是p。
```


```
/W /w的反置形式，匹配一个或多个非单词字符，如点号句号等。
```


```
/b 单词锁定符，如: '/bgrep/b'只匹配grep。
```


关于匹配的实例：  

grep -c "48" test.txt     
统计所有以“48”字符开头的行有多少

grep -i "May" test.txt  
不区分大小写查找“May”所有的行）

grep -n "48" test.txt  
显示行号；显示匹配字符“48”的行及行号，相同于 nl test.txt |grep 48）

grep -v "48" test.txt  
显示输出没有字符“48”所有的行）  

grep "471" test.txt   
显示输出字符“471”所在的行）

grep "48;" test.txt   
显示输出以字符“48”开头，并在字符“48”后是一个tab键所在的行

grep "48[34]" test.txt  
显示输出以字符“48”开头，第三个字符是“3”或是“4”的所有的行）

grep "^[^48]" test.txt  
显示输出行首不是字符“48”的行）
  
grep "[Mm]ay" test.txt  
设置大小写查找：显示输出第一个字符以“M”或“m”开头，以字符“ay”结束的行）

grep "K…D" test.txt  
显示输出第一个字符是“K”，第二、三、四是任意字符，第五个字符是“D”所在的行）

grep "[A-Z][9]D" test.txt  
显示输出第一个字符的范围是“A-D”，第二个字符是“9”，第三个字符的是“D”的所有的行

grep "[35]..1998" test.txt  
显示第一个字符是3或5，第二三个字符是任意，以1998结尾的所有行

grep "4/{2,/}" test.txt 
模式出现几率查找：显示输出字符“4”至少重复出现两次的所有行

grep "9/{3,/}" test.txt  
模式出现几率查找：显示输出字符“9”至少重复出现三次的所有行

grep "9/{2,3/}" test.txt  
模式出现几率查找：显示输出字符“9”重复出现的次数在一定范围内，重复出现2次或3次所有行

grep -n "^$" test.txt 显示输出空行的行号

ls -l |grep "^d" 如果要查询目录列表中的目录 同：  
ls -d * 
ls -l |grep "^d[d]"    
在一个目录中查询不包含 目录的所有文件  
ls -l |grpe "^d…..x..x"  
```

'^$' 就表示只有行首行尾的空行！
